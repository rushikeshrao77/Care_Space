<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>User Dashboard ‚Äì CareSpace</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script defer>
    // Ask for user's location
    function getLocationAndShowNearby() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        alert("Geolocation is not supported by your browser.");
      }
    }

    function showPosition(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      document.getElementById("location-info").innerHTML =
        `üìç Your Location: ${lat.toFixed(4)}, ${lon.toFixed(4)} <br>
        <small>(Feature: show nearby hospitals based on this)</small>`;
        
      // You can now filter or send lat/lon to backend to get nearby hospitals
    }

    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          alert("User denied the request for Geolocation.");
          break;
        case error.POSITION_UNAVAILABLE:
          alert("Location information is unavailable.");
          break;
        case error.TIMEOUT:
          alert("The request to get user location timed out.");
          break;
        case error.UNKNOWN_ERROR:
          alert("An unknown error occurred.");
          break;
      }
    }

    window.onload = getLocationAndShowNearby;
  </script>
</head>

<body class="dashboard-body">

  <div class="sidebar">
    <h2>CareSpace</h2>
    <ul>
      <li><i class="fas fa-home"></i> Home</li>
      <li><i class="fas fa-user"></i> Profile</li>
      <li><i class="fas fa-bed"></i> Bed Status</li>
      <li><i class="fas fa-sign-out-alt"></i> Logout</li>
    </ul>
  </div>

  <div class="main-content">
    <header>
      <h1>Welcome, User!</h1>
      <p>Check available hospital beds in real-time.</p>
      <div id="location-info" style="margin-top: 10px; font-weight: bold; color: #007BFF;"></div>
    </header>

    <section class="table-section">
      <div class="table-header">
        <h2>Bed Availability</h2>
        <input type="text" placeholder="Search hospitals..." class="search-input"/>
      </div>
      <table class="styled-table">
        <thead>
          <tr>
            <th>Hospital</th>
            <th>Location</th>
            <th>General</th>
            <th>ICU</th>
            <th>Maternity</th>
            <th>Emergency</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>CityCare Hospital</td>
            <td>Nashik</td>
            <td>‚úÖ 5</td>
            <td>‚ö†Ô∏è 2</td>
            <td>‚úÖ 3</td>
            <td>‚ùå 0</td>
          </tr>
          <tr>
            <td>HealthPlus Clinic</td>
            <td>Mumbai</td>
            <td>‚úÖ 8</td>
            <td>‚úÖ 4</td>
            <td>‚ö†Ô∏è 1</td>
            <td>‚úÖ 2</td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
</body>
</html>
